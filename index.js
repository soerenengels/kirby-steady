(function(){"use strict";function i(s,t,e,c,u,b,h,p){var a=typeof s=="function"?s.options:s;return t&&(a.render=t,a.staticRenderFns=e,a._compiled=!0),{exports:s,options:a}}const n={props:{reports:Array,widgets:Array,widgetsEnabled:Boolean,widgetsWarning:Boolean,publication:Object,plans:Object,subscriptions:Object,newsletterSubscribers:Object,tab:String,subtab:String,reports:Array,plugin:Object},data(){return{baseUrl:"/steady/api",tabs:[{name:"stats",label:"Stats",icon:"chart",link:"steady/stats"},{name:"widgets",label:"Widgets",icon:"dashboard",link:"steady/widgets"},{name:"api",label:"API $steady",icon:"code",link:"steady/api?tab=publication"}]}},computed:{apiTabs(){return[{name:"publication",label:"->publication()",icon:"page",link:this.baseUrl+"?tab=publication"},{name:"plans",label:"->plans()",icon:"store",link:this.baseUrl+"?tab=plans"},{name:"subscriptions",label:"->subscriptions()",icon:"money",link:this.baseUrl+"?tab=subscriptions"},{name:"subscribers",label:"->newsletter_subscribers()",icon:"users",link:this.baseUrl+"?tab=subscribers"},{name:"report",label:"->report($id)",icon:"grid-top-left",link:this.baseUrl+"?tab=report"}]},filteredSubscriptions(){return this.subscriptions.filter(s=>s.monthly_amount<500)}},methods:{}};var r=function(){var t=this,e=t._self._c;return e("k-panel-inside",[e("k-view",{staticClass:"k-steady"},[e("k-header",{staticClass:"k-steady-header",scopedSlots:t._u([{key:"buttons",fn:function(){return[e("k-button",{attrs:{title:"Version "+t.plugin.version}},[t._v("v"+t._s(t.plugin.version))]),e("k-button",{attrs:{icon:"github",link:t.plugin.link}},[t._v("Go to Plugin Repository")])]},proxy:!0}])},[t._v(" "+t._s(t.publication.title)+" ")]),e("k-tabs",{attrs:{tabs:t.tabs,tab:t.tab}}),t.tab=="stats"?[e("k-grid",{attrs:{variant:"columns"}},[e("k-column",{attrs:{width:"1/3"}},[e("k-section",{attrs:{headline:"Stats"}},[e("k-stats",{staticClass:"k-system-info",attrs:{reports:t.reports,size:"huge"}})],1)],1),e("k-column",{attrs:{width:"2/3"}},[e("k-section",{attrs:{headline:"How to: Use Stats in Blueprint"}},[e("k-text",[t._v(" The "),e("k-link",{attrs:{to:t.plugin.link}},[t._v(t._s(t.plugin.name))]),t._v(" Plugin uses a "),e("strong",[t._v("site method")]),t._v(" to make the Steady reports available. Including the Stats in your blueprints is dead easy. For more information see the "),e("a",{attrs:{href:"https://getkirby.com/docs/reference/panel/sections/stats#reports"}},[t._v("Kirby docs")]),t._v(". ")],1),e("k-headline",{attrs:{tag:"h3"}},[t._v("Example")]),e("pre",[e("k-code",{attrs:{language:"yml"}},[t._v(`sections:
  reportSection:
    type: stats
    label: Stats
    reports:
      - site.steady.reports("newsletter_subscribers")
      - site.steady.reports("members")
      - site.steady.reports("revenue")
`)])],1)],1)],1)],1)]:t._e(),t.tab=="widgets"?[e("k-grid",{attrs:{variant:"columns"}},[e("k-column",{attrs:{width:"2/3"}},[e("k-section",{attrs:{headline:"State of Widgets"}},[e("k-stats",{class:{"k-stats-widgets":!0,inactive:!t.widgetsEnabled},attrs:{reports:t.widgets,size:"medium"}}),e("k-text",[t._v("This section displays the "),e("strong",[t._v("current configuration state")]),t._v(" of the kirby-steady plugin option('soerenengels.steady.widget') and the individual widget settings in the Steady backend.")]),t.widgetsEnabled&&t.widgetWarning?e("k-box",{attrs:{theme:"notice"}},[t._v("Widgets are activated in Kirbys config.php, but none is activated in the Steady backend. ")]):t._e(),!t.widgetsEnabled&&t.widgetWarning?e("k-box",{attrs:{theme:"notice"}},[t._v("Widgets are disabled in Kirby, but activated in the Steady backend.")]):t._e()],1)],1),e("k-column",{attrs:{width:"1/3"}},[e("k-section",{attrs:{headline:"How to: Activate the Widgets"}},[e("k-text",[t._v("Click on the Widgets state to enable or disable the Widget in the Steady Backend.")]),e("k-headline",[t._v("Config")]),e("k-text",[t._v("Include the `components/steady/widget`-Snippet in your websites head. Change the kirby config.php file to activate the snippet an enable the use of Steady Widgets.")]),e("k-headline",[t._v("Paywall")]),e("k-text",[t._v("You can use the Steady: Paywall $block to enable the paywall on a certain webpage.")]),e("k-headline",[t._v("Adblock Detection")]),e("k-text",[t._v("If the adblock detection is enabled in the Steady Backend and the Widget option is configured, the adblock detection is active.")]),e("k-headline",[t._v("Floating Button")]),e("k-text",[t._v("If the floating button is enabled in the Steady Backend and the Widget option is configured, the floating button should be visible.")]),e("k-headline",[t._v("Checkout")]),e("k-text",[t._v("Explainer on how to activate and use the Widgets (Backend, Config, JS, Blocks)")])],1)],1)],1)]:t._e(),t.tab=="api"?[e("k-headline",[t._v("$steady")]),e("k-text",[t._v("You can access following mehthods from the $steady object.")]),e("k-code",{attrs:{language:"php"}},[t._v("$steady = $site->steady();")]),e("k-tabs",{attrs:{tabs:t.apiTabs,tab:t.subtab}}),t.subtab=="publication"?[e("k-grid",{attrs:{variant:"columns"}},[e("k-column",{attrs:{width:"1/3"}},[e("k-section",{attrs:{headline:"$steady->publication()"}},[e("k-text",[t._v(" Returns the "),e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/Publication.php"}},[t._v("\\Soerenengels\\Steady\\Publication")]),t._v(" Class."),e("br"),t._v("Gives access to the following readonly properties. ")])],1)],1),e("k-column",{attrs:{width:"2/3"}},[e("k-section",{attrs:{headline:"Example"}},[e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.publication))])],1)],1)],1)]:t._e(),t.subtab=="plans"?[e("k-grid",{attrs:{variant:"columns"}},[e("k-column",{attrs:{width:"1/3"}},[e("k-section",{attrs:{headline:"$steady->plans()"}},[e("k-text",[t._v(" Returns the "),e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/Plans.php"}},[t._v("\\Soerenengels\\Steady\\Plans")]),t._v(" Class."),e("br"),e("br")]),e("k-text",[t._v(" Methods: "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/CountTrait.php"}},[t._v("count()")]),t._v(": int")]),e("li",[e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/FilterTrait.php"}},[t._v("filter(\\Closure $filter)")]),t._v(": Plans")]),e("li",[e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/FindTrait.php"}},[t._v("find(string $id)")]),t._v(" ?Plan ")]),e("li",[e("k-link",{attrs:{to:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/hasItems.php"}},[t._v("list()")]),t._v(": Plan[] ")],1)])])],1)],1),e("k-column",{attrs:{width:"2/3"}},[e("k-section",{attrs:{headline:"Example: $steady->plans->count()"}},[e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.plans.length))]),e("k-headline",{attrs:{tag:"h3",id:"example-plans-list"}},[t._v("Example: $steady->plans->list()")]),e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.plans))]),t.plans.length?[e("k-headline",{attrs:{tag:"h3",id:"example-plans-find"}},[t._v('Example: $steady->plans->find("'+t._s(t.plans[0].id)+'")')]),e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.plans[0])+" ")])]:t._e()],2)],1)],1)]:t._e(),t.subtab=="subscriptions"?[e("k-grid",{attrs:{variant:"columns"}},[e("k-column",{attrs:{width:"1/3"}},[e("k-section",{attrs:{headline:"$steady->subscriptions()"}},[e("k-text",[t._v(" Returns the "),e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/Subscriptions.php"}},[t._v("\\Soerenengels\\Steady\\Subscriptions")]),t._v(" Class."),e("br"),e("br")]),e("k-text",[t._v(" Methods: "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/CountTrait.php"}},[t._v("count()")]),t._v(": int")]),e("li",[e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/FilterTrait.php"}},[t._v("filter(\\Closure $filter)")]),t._v(": Subscriptions")]),e("li",[e("a",{attrs:{href:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/FindTrait.php"}},[t._v("find(string $id)")]),t._v(" ?Subscription ")]),e("li",[e("k-link",{attrs:{to:"https://github.com/soerenengels/kirby-steady/blob/main/classes/Steady/hasItems.php"}},[t._v("list()")]),t._v(": Subscription[] ")],1)])])],1)],1),e("k-column",{attrs:{width:"2/3"}},[e("k-section",{attrs:{headline:"Example: $steady->subscriptions->count()"}},[e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.subscriptions.length))])],1),e("k-section",{attrs:{headline:"Example: $steady->subscriptions->filter(fn($sub) => $sub->monthly_amount < 500)"}},[e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.filteredSubscriptions))])],1),e("k-section",{attrs:{headline:`Example: $steady->subscriptions->find('${t.subscriptions[0].id}')`}},[e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.subscriptions[0]))])],1),e("k-section",{attrs:{headline:"Example: $steady->subscriptions->list()"}},[e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.subscriptions))])],1)],1)],1)]:t._e(),t.subtab=="subscribers"?[e("k-grid",{attrs:{variant:"columns"}},[e("k-column",{attrs:{width:"1/3"}},[e("k-section",{attrs:{headline:"$steady->newsletter_subscribers()->list()"}},[e("k-text",[t._v("You see a random sample of your newsletter subscribers.")])],1)],1),e("k-column",{attrs:{width:"2/3"}},[e("k-section",{attrs:{headline:"Example"}},[e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.newsletterSubscribers))])],1)],1)],1)]:t._e(),t.subtab=="report"?[e("k-grid",{attrs:{variant:"columns"}},[e("k-column",{attrs:{width:"1/3"}},[e("k-section",{attrs:{headline:"$steady->report(string $id): ?array"}},[e("k-text",[t._v("Use 'revenue', 'newsletter_subscribers' or 'members' as $id to return a report array for a stats section.")])],1)],1),e("k-column",{attrs:{width:"2/3"}},[e("k-section",{attrs:{headline:"Example"}},[e("k-code",{attrs:{language:"json"}},[t._v(t._s(t.reports))])],1)],1)],1)]:t._e()]:t._e(),t.tab=="oauth"?[e("k-grid",{attrs:{variant:"columns"}},[e("k-column",{attrs:{width:"1/2"}},[e("k-section",{attrs:{headline:"Setup"}},[e("k-text",[t._v("If you want to use the OAuth feature of the kirby-steady plugin, you need to get the OAuth credentials from the Steady backend and add them to your sites config file.")]),e("pre",[e("k-code",{attrs:{language:"php"}},[t._v(`<?php
	return [
		'soerenengels.steady.oauth' => [
			'key' => '...',
			'secret' => '...'
		]
	];
`)])],1)],1)],1),e("k-column",{attrs:{width:"1/2"}},[e("k-section",{attrs:{headline:"User Flow"}},[e("k-text",[e("ol",[e("li",[t._v("To use the Steady OAuth Flow, the user needs to visit the `/oauth/steady/authorize` route. At this route a session cookie gets stored and the user will be redirected to steady, to authorize.")]),e("li",[t._v("When the user authorized the application, they will be redirected to the `/oauth/steady/callback` route. The verification string will be checked and the access token will be stored.")])])])],1)],1),e("k-column",{attrs:{width:"1/2"}},[e("k-section",{attrs:{headline:"$steady->oauth->user()"}},[e("k-code",{attrs:{language:"json"}},[t._v("{ user }")])],1)],1),e("k-column",{attrs:{width:"1/2"}},[e("k-section",{attrs:{headline:"$steady->oauth->subscription()"}},[e("k-code",{attrs:{language:"json"}},[t._v("{ subscription }")])],1)],1)],1)]:t._e()],2)],1)},o=[],l=i(n,r,o);const d=l.exports;panel.plugin("soerenengels/kirby-steady",{use:{plugin(s){window.__VUE_DEVTOOLS_GLOBAL_HOOK__&&(window.__VUE_DEVTOOLS_GLOBAL_HOOK__.Vue=s)}},components:{"k-steady-view":d},icons:{steady:'<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40Z" fill="#291E38"/><g clip-path="url(#clip0_1401_20468)"><path opacity="0.5" d="M19.989 22.174L19.989 22.1766C19.7808 22.2193 19.4684 22.2833 19.0518 22.3686C18.1687 22.5433 17.4849 22.8764 17.0002 23.3678C16.5156 23.8592 16.2733 24.4434 16.2733 25.1204C16.2733 25.3506 16.2972 25.5687 16.3452 25.7749L12.129 27.0699C11.8763 26.3632 11.75 25.6152 11.75 24.8256C11.75 23.1439 12.31 21.6806 13.4301 20.4358C14.5501 19.1909 16.1225 18.3719 18.1472 17.9788C18.9629 17.8582 19.5755 17.7582 19.985 17.6786V17.6777C20.2024 17.6358 20.5284 17.5591 20.9631 17.4476C22.6181 17.124 23.4455 16.2612 23.4455 14.8592C23.4455 14.7301 23.4368 14.6039 23.4194 14.4808C23.4054 14.382 23.3858 14.2812 23.3606 14.1863L27.495 12.9182C27.7398 13.6202 27.8622 14.3791 27.8622 15.1827C27.8622 16.8868 27.3249 18.3104 26.2503 19.4536C25.1757 20.5968 23.7142 21.3625 21.8658 21.7508C21.0328 21.948 20.4072 22.0891 19.989 22.174Z" fill="white"/><path d="M19.9887 8.00035C22.1443 8.01807 23.9869 8.70818 25.5249 10.0707C26.4641 10.9028 27.1202 11.8524 27.4933 12.9195L23.3599 14.1877C23.222 13.67 22.9174 13.209 22.4461 12.8047C21.8047 12.2544 20.9886 11.969 19.9887 11.9485C19.9595 11.9481 19.9252 11.9473 19.8956 11.9473C18.8425 11.9473 17.9828 12.2331 17.3165 12.8047C16.6502 13.3763 16.3171 14.0611 16.3171 14.8592C16.3171 16.2612 17.1446 17.124 18.7995 17.4476C19.328 17.5508 19.724 17.6278 19.9874 17.6785V17.6777C20.397 17.7573 21.0113 17.8577 21.8304 17.9788C23.8551 18.3719 25.4274 19.1909 26.5475 20.4358C27.6675 21.6806 28.2276 23.1439 28.2276 24.8256C28.2276 26.7475 27.4791 28.4237 25.9821 29.8542C24.4851 31.2847 22.5089 32 19.9887 32C17.4686 32 15.4924 31.2847 13.9954 29.8542C13.1136 29.0116 12.4915 28.0837 12.1292 27.0705L16.3454 25.776C16.4751 26.3325 16.7795 26.802 17.2586 27.1843C17.9156 27.7085 18.8256 27.9705 19.9887 27.9705C21.1519 27.9705 22.0619 27.7085 22.7189 27.1843C23.3758 26.6601 23.7043 25.9722 23.7043 25.1204C23.7043 24.4434 23.462 23.8592 22.9773 23.3678C22.4927 22.8764 21.8088 22.5433 20.9257 22.3686C20.5093 22.2833 20.197 22.2193 19.9887 22.1767V22.1779C19.5247 22.0838 18.8274 21.9414 17.8968 21.7507C16.0484 21.3625 14.587 20.5968 13.5123 19.4536C12.4377 18.3104 11.9004 16.8868 11.9004 15.1827C11.9004 13.1552 12.6795 11.4512 14.2377 10.0707C15.7959 8.69023 17.6711 8 19.8634 8C19.9039 8 19.9485 8.00017 19.9887 8.00052V8.00035Z" fill="white"/></g><defs><clipPath id="clip0_1401_20468"><rect width="16.4776" height="24" fill="white" transform="translate(11.75 8)"/></clipPath></defs></svg>'}})})();
